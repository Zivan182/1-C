Работа с изображением происходит с помощью библиотеки opencv. 
С помощью функции HoughLinesP получаем координаты отрезков, изображенных на рисунке. 
Затем для каждой пары отрезков проверяем пересечение.


Алгоритм работает за O(n^2):

Получение координат отрезков из изображения работает за O(n^2), из за удаления дубликатов.

Нахождение количества пересечений в множестве отрезков работает за O(n^2). 
Есть алгоритм Бентли — Оттманна, который работает за O((n + I)logn), где I - количество пересечений, но я не успел его реализовать.

